# Solution Building Block (SBB)
# AWS Bedrock AgentCore Agent
# Version 1.0.0

document_control:
  document_type: "Solution Building Block"
  version: "1.0.0"
  status: "Draft"
  created_date: "2025-11-28"
  last_modified: "2025-11-28"
  owner: "BNZ Technology"
  architecture_domain: "Application"
  implementation_phase: "Production"

identification:
  sbb_id: "SBB-APP-001"
  sbb_name: "AWS Bedrock AgentCore Agent"
  sbb_short_name: "AgentCore Agent"
  version: "1.0.0"
  classification: "PaaS"
  description: "AWS Bedrock AgentCore provides a enterprise-grade platform for deploying and operating AI agents at scale. It consists of seven modular services (Runtime, Memory, Gateway, Identity, Observability, Browser Tool, Code Interpreter) that work together to provide production-ready infrastructure for agentic AI applications."
  procurement_type: "Cloud Service (PaaS)"
  vendor_provider: "Amazon Web Services (AWS)"
  business_justification: "AWS AgentCore selected for its enterprise-grade security, framework-agnostic architecture (supports LangChain, CrewAI, LangGraph, custom frameworks), operational tooling, and deep integration with AWS ecosystem already adopted by BNZ."

abb_realization:
  realizes_abbs:
    - abb_id: "ABB-APP-001"
      abb_name: "Agentic AI Agent"
      realization_percentage: 100
      realization_method: "Full"
      gaps:
        - gap_id: "GAP-001"
          gap_description: "No built-in low-code visual authoring (code-first approach)"
          gap_impact: "Requires developers with Python/TypeScript skills"
          gap_severity: "Low"
          workaround: "Use Infrastructure as Code (IaC) with reusable templates"
  
  abb_requirements_mapping:
    - abb_requirement_id: "FUNC-001"
      requirement_description: "Natural Language Understanding & Generation"
      sbb_feature: "Foundation Model Integration (Bedrock/external LLMs)"
      compliance_status: "Full"
      notes: "Supports any LLM"
      
    - abb_requirement_id: "FUNC-002"
      requirement_description: "Reasoning & Decision Making"
      sbb_feature: "Runtime + Custom Agent Frameworks"
      compliance_status: "Full"
      notes: "Framework-agnostic"
      
    - abb_requirement_id: "FUNC-003"
      requirement_description: "Memory Management"
      sbb_feature: "AgentCore Memory Service"
      compliance_status: "Full"
      notes: "Dual short/long-term memory"
      
    - abb_requirement_id: "FUNC-004"
      requirement_description: "Tool Orchestration & Integration"
      sbb_feature: "AgentCore Gateway (MCP support)"
      compliance_status: "Full"
      notes: "Zero-code API transformation"
      
    - abb_requirement_id: "FUNC-005"
      requirement_description: "Knowledge Retrieval"
      sbb_feature: "Custom RAG implementation via Gateway"
      compliance_status: "Partial"
      notes: "Requires external vector DB"
      
    - abb_requirement_id: "FUNC-006"
      requirement_description: "Identity & Authorization"
      sbb_feature: "AgentCore Identity (Cognito, Okta, Entra ID)"
      compliance_status: "Full"
      notes: "OAuth 2.0, SAML 2.0"
      
    - abb_requirement_id: "FUNC-007"
      requirement_description: "Multi-turn Conversation Management"
      sbb_feature: "Runtime Session Isolation"
      compliance_status: "Full"
      notes: "8-hour sessions"
      
    - abb_requirement_id: "FUNC-008"
      requirement_description: "Error Handling & Recovery"
      sbb_feature: "Observability + CloudWatch"
      compliance_status: "Full"
      notes: "OpenTelemetry compatible"

product_specifications:
  product_details:
    product_name: "Amazon Bedrock AgentCore"
    product_family: "Amazon Bedrock"
    version: "Public Preview (as of Nov 2025)"
    release_date: "2025-07-16"
    vendor:
      name: "Amazon Web Services, Inc."
      website: "https://aws.amazon.com/bedrock/agentcore/"
      support_contact: "AWS Premium Support"
      account_manager: "BNZ AWS Account Team"
    license_model: "Pay-per-use (consumption-based)"
    license_details:
      license_type: "Commercial Cloud Service"
      number_of_licenses: "N/A - consumption model"
      license_cost: "See pricing section"
      renewal_date: "N/A - monthly billing"
      restrictions: "Subject to AWS Service Terms"
  
  technical_specifications:
    runtime_environment:
      execution_model: "Serverless (Firecracker microVMs)"
      session_duration: "Up to 8 hours"
      isolation: "Complete session-level isolation"
      scaling: "Automatic based on demand"
      supported_frameworks: ["LangChain", "LangGraph", "CrewAI", "Strands", "Custom"]
      supported_languages: ["Python", "TypeScript", "JavaScript"]
    
    memory_system:
      short_term_memory: "Session-based context (up to 8 hours)"
      long_term_memory: "Persistent cross-session storage"
      api_access: "REST APIs and SDKs"
      storage_backend: "AWS managed service"
    
    gateway_capabilities:
      protocol_support: ["Model Context Protocol (MCP)", "REST", "GraphQL"]
      tool_transformation: "Zero-code API to MCP tool conversion"
      aws_integrations: "Native access to 200+ AWS services"
      third_party_connectors: ["Salesforce", "ServiceNow", "Slack", "GitHub", "Microsoft 365"]
    
    identity_providers:
      supported_idps: ["Amazon Cognito", "Microsoft Entra ID", "Okta", "SAML 2.0", "Custom OIDC"]
      authentication_patterns: ["OAuth 2.0 Authorization Code", "OAuth 2.0 Client Credentials"]
      token_management: "Automatic refresh and lifecycle"
    
    monitoring:
      telemetry_standard: "OpenTelemetry"
      cloudwatch_integration: true
      metrics: ["Latency", "Token usage", "Tool invocations", "Error rates"]
      tracing: "Distributed tracing with X-Ray compatible"
      dashboards: "Pre-built CloudWatch dashboards"
    
    cloud_specs:
      provider: "AWS"
      supported_regions: ["us-east-1", "us-west-2", "eu-west-1"]
      availability_zones: "Multi-AZ deployment"
      deployment_options: ["Public", "VPC-only", "Private endpoints (PrivateLink)"]
  
  deployment_architecture:
    deployment_model: "Cloud"
    deployment_pattern: "Serverless + Managed Services"
    architecture_layers:
      - layer: "User Interface"
        components: ["Custom web/mobile apps", "API clients"]
      - layer: "AgentCore Services"
        components:
          - "Runtime (serverless agent execution)"
          - "Memory (dual short/long-term storage)"
          - "Gateway (MCP tool orchestration)"
          - "Identity (enterprise IdP integration)"
          - "Observability (OpenTelemetry)"
          - "Browser Tool (web automation)"
          - "Code Interpreter (sandboxed execution)"
      - layer: "Foundation Models"
        components: ["Amazon Bedrock models", "External LLM APIs"]
      - layer: "External Integrations"
        components: ["Enterprise APIs", "AWS Services", "SaaS applications"]
    infrastructure_as_code:
      tool: "Terraform"
      repository: "https://github.com/bnz/ai-platform-infrastructure"
      version: "1.2.0"

implemented_functionality:
  core_features:
    - feature_id: "FEAT-001"
      feature_name: "AgentCore Runtime"
      description: "Secure serverless execution environment with 8-hour session support"
      abb_mapping: ["FUNC-002", "FUNC-007"]
      enabled: true
      configuration_required: true
      
    - feature_id: "FEAT-002"
      feature_name: "AgentCore Memory"
      description: "Dual short-term and long-term memory with API access"
      abb_mapping: ["FUNC-003"]
      enabled: true
      configuration_required: true
      
    - feature_id: "FEAT-003"
      feature_name: "AgentCore Gateway"
      description: "Zero-code API to MCP tool transformation with 200+ AWS services"
      abb_mapping: ["FUNC-004"]
      enabled: true
      configuration_required: true
      
    - feature_id: "FEAT-004"
      feature_name: "AgentCore Identity"
      description: "Enterprise IdP integration with OAuth 2.0 and SAML 2.0"
      abb_mapping: ["FUNC-006"]
      enabled: true
      configuration_required: true
      
    - feature_id: "FEAT-005"
      feature_name: "AgentCore Observability"
      description: "OpenTelemetry-compatible monitoring with CloudWatch integration"
      abb_mapping: ["FUNC-008"]
      enabled: true
      configuration_required: true
  
  optional_features:
    - feature_id: "FEAT-OPT-001"
      feature_name: "AgentCore Browser Tool"
      description: "Serverless web automation for agent tool use"
      enabled: true
      reason_not_enabled: "N/A - enabled"
      
    - feature_id: "FEAT-OPT-002"
      feature_name: "AgentCore Code Interpreter"
      description: "Sandboxed Python execution for data analysis and code generation"
      enabled: true
      reason_not_enabled: "N/A - enabled"
  
  custom_extensions:
    - extension_id: "EXT-001"
      extension_name: "BNZ Knowledge Integration"
      description: "Custom RAG implementation for BNZ SharePoint knowledge base"
      technology: "Python + LangChain + Pinecone"
      development_effort: "40 hours"
      code_repository: "https://github.com/bnz/agentcore-knowledge-adapter"
  
  performance_characteristics:
    measured_metrics:
      response_time_p50: "150ms"
      response_time_p95: "500ms"
      response_time_p99: "1200ms"
      throughput_max: "10,000+ concurrent agents"
      session_duration_max: "28,800 seconds (8 hours)"
    
    benchmarks:
      - benchmark_name: "Customer Support Agent Load Test"
        date_performed: "2025-10-15"
        results: "10,000 concurrent agents sustained at 95th percentile 500ms latency"
        test_methodology: "Apache JMeter + AWS Load Testing"
        report_location: "https://confluence.bnz.co.nz/ai-platform/agentcore-benchmarks"
    
    sla_compliance:
      availability_actual: "99.95%"
      availability_target: "99.9%"
      mttr_actual: "15 minutes"
      mttr_target: "30 minutes"

integration_interfaces:
  provided_interfaces:
    - interface_id: "IF-001"
      interface_name: "Agent Invocation API"
      interface_type: "REST API"
      protocol: "HTTPS"
      data_format: "JSON"
      authentication: "AWS IAM Signature V4"
      operations: ["invoke_agent", "create_session", "get_session", "delete_session"]
      
    - interface_id: "IF-002"
      interface_name: "Memory Management API"
      interface_type: "REST API"
      protocol: "HTTPS"
      data_format: "JSON"
      authentication: "AWS IAM Signature V4"
      operations: ["store_memory", "retrieve_memory", "search_memory", "delete_memory"]
      
    - interface_id: "IF-003"
      interface_name: "Gateway MCP Endpoint"
      interface_type: "MCP Server"
      protocol: "JSON-RPC 2.0 over HTTPS"
      data_format: "JSON"
      authentication: "OAuth 2.0"
      supported_tools: "Dynamically registered via MCP protocol"
  
  required_interfaces:
    - interface_id: "IF-REQ-001"
      interface_name: "Foundation Model API"
      interface_type: "REST API"
      protocol: "HTTPS"
      data_format: "JSON"
      provider: "Amazon Bedrock / External LLM providers"
      
    - interface_id: "IF-REQ-002"
      interface_name: "Identity Provider"
      interface_type: "OAuth 2.0 / SAML 2.0"
      protocol: "HTTPS"
      provider: "Amazon Cognito / Microsoft Entra ID / Okta"
  
  integration_patterns:
    - pattern_name: "Serverless Agent Execution"
      protocol: "HTTPS REST"
      implementation_details: "Event-driven agent invocation via API Gateway"
      error_handling: "Automatic retries with exponential backoff"
      retry_policy:
        max_retries: 3
        backoff_strategy: "Exponential"
        initial_delay_ms: 1000
      
    - pattern_name: "MCP Tool Orchestration"
      protocol: "Model Context Protocol (MCP)"
      implementation_details: "Gateway transforms APIs to MCP tools, agents invoke via standard protocol"
      message_format: "JSON-RPC 2.0 over HTTPS"
      
    - pattern_name: "Asynchronous Memory Operations"
      protocol: "HTTPS REST"
      implementation_details: "Non-blocking memory storage and retrieval"
      consistency_model: "Eventually consistent"
  
  data_integration:
    data_sources:
      - source_id: "DS-001"
        source_name: "BNZ Knowledge Base (SharePoint)"
        connection_method: "Microsoft Graph API via Gateway"
        data_format: "HTML, PDF, DOCX"
        refresh_frequency: "Hourly"
        data_volume: "100K documents, ~50GB"
        
      - source_id: "DS-002"
        source_name: "Customer Data Platform (Salesforce)"
        connection_method: "Salesforce REST API via Gateway"
        data_format: "JSON"
        refresh_frequency: "Real-time"
        data_volume: "Variable per request"
    
    data_targets:
      - target_id: "DT-001"
        target_name: "CloudWatch Logs"
        connection_method: "AWS SDK"
        data_format: "JSON"
        data_entities: ["Agent conversations", "Tool invocations", "Errors"]

security_implementation:
  authentication:
    methods: ["AWS IAM", "OAuth 2.0", "SAML 2.0"]
    primary_method: "AWS IAM"
    identity_providers: ["Amazon Cognito", "Microsoft Entra ID", "Okta"]
    mfa_enabled: true
    mfa_methods: ["TOTP", "WebAuthn"]
  
  authorization:
    model: "IAM Policies + Resource-based policies"
    fine_grained_access: "Per-agent, per-tool, per-memory namespace"
    enforcement_point: "AWS IAM Policy Engine"
  
  data_protection:
    encryption_at_rest:
      enabled: true
      algorithm: "AES-256"
      key_management: "AWS KMS (Customer Managed Keys)"
    encryption_in_transit:
      enabled: true
      protocol: "TLS 1.3"
      certificate_authority: "AWS Certificate Manager"
    data_isolation:
      session_isolation: "Complete session isolation via Firecracker microVMs"
      tenant_isolation: "VPC isolation, private endpoints available"
  
  security_monitoring:
    logging:
      audit_logging: true
      log_destination: "CloudWatch Logs"
      log_events: ["Authentication", "Authorization", "Agent invocations", "Tool calls", "Memory access"]
      retention_period: "90 days (adjustable)"
    siem_integration:
      siem_platform: "BNZ Splunk"
      events_forwarded: ["Authentication", "Authorization failures", "Tool invocations", "Data access"]
  
  vulnerability_management:
    managed_service: "AWS responsibility for infrastructure patching"
    application_scanning: "BNZ responsibility for custom agent code"
  
  compliance:
    frameworks: ["SOC 2", "ISO 27001", "PCI-DSS (infrastructure)"]
    aws_compliance_reports: "Available via AWS Artifact"
  
  security_architecture:
    network_security:
      deployment_options:
        - "Public endpoints with IAM authentication"
        - "VPC-only deployment with PrivateLink"
        - "AWS PrivateLink for private connectivity"
      network_isolation: "VPC with security groups and NACLs"
    application_security:
      input_validation: "AWS WAF rules for API Gateway"
      prompt_injection_protection: "Custom validation logic in agent code"
      secrets_management: "AWS Secrets Manager for API keys and credentials"

operational_characteristics:
  deployment_configuration:
    ci_cd_pipeline:
      tool: "GitHub Actions"
      pipeline_url: "https://github.com/bnz/ai-platform/actions"
      build_frequency: "On commit to main branch"
      deployment_frequency: "Weekly (Tuesdays)"
    
    deployment_automation:
      automation_level: "Fully Automated"
      deployment_tool: "Terraform + AWS CDK"
      rollback_capability: true
      rollback_time: "< 5 minutes (blue-green deployment)"
    
    configuration_management:
      config_location: "AWS Systems Manager Parameter Store"
      config_format: "JSON"
      environment_configs: ["Dev", "Test", "Staging", "Production"]
      secrets_management: "AWS Secrets Manager"
      config_validation: "Automated via pre-deployment hooks"
  
  monitoring_observability:
    observability_platform: "AWS CloudWatch + X-Ray"
    metrics:
      collection_interval: "1 minute"
      retention_period: "15 months"
      key_metrics:
        - metric_name: "Agent Invocation Latency"
          threshold: "< 2s p95"
          alert_on_breach: true
        - metric_name: "Token Consumption"
          threshold: "< $10K/day"
          alert_on_breach: true
        - metric_name: "Error Rate"
          threshold: "< 1%"
          alert_on_breach: true
    
    logging:
      log_aggregation: "CloudWatch Logs"
      log_level: "INFO (Production), DEBUG (Dev)"
      log_retention: "90 days"
      structured_logging: true
      log_format: "JSON"
    
    tracing:
      distributed_tracing: true
      tracing_tool: "AWS X-Ray"
      trace_sampling: "5% (production), 100% (dev)"
    
    alerting:
      alerting_tool: "CloudWatch Alarms + PagerDuty"
      alert_channels: ["Email", "PagerDuty", "Slack"]
      escalation_policy: "L2 Platform Team -> L3 AWS Support"
      on_call_rotation: "Weekly rotation"
    
    dashboards:
      - dashboard_name: "AgentCore Operations Dashboard"
        tool: "CloudWatch Dashboard"
        url: "https://console.aws.amazon.com/cloudwatch/dashboards/agentcore-ops"
        metrics_displayed: ["Invocations", "Latency", "Errors", "Token usage"]
  
  backup_recovery:
    backup:
      agent_configurations:
        backup_method: "Version controlled in Git"
        backup_frequency: "On every commit"
      memory_data:
        backup_type: "Continuous replication"
        backup_location: "AWS managed (cross-AZ)"
        backup_encryption: true
        retention: "Per data classification policy"
    
    recovery:
      rpo: "5 minutes (agent memory)"
      rto: "30 minutes (full service restoration)"
      recovery_procedures: "https://confluence.bnz.co.nz/ai-platform/agentcore-dr"
      disaster_recovery_plan: "Multi-region failover (us-east-1 -> us-west-2)"
      failover_capability: "Manual"
      last_dr_test: "2025-09-15"
      dr_test_success: true
  
  maintenance_support:
    aws_managed: "Infrastructure patching and updates by AWS"
    application_maintenance: "BNZ responsibility for agent code and configurations"
    support:
      support_model: "Hybrid (AWS + BNZ)"
      support_tiers:
        - tier: "L1"
          provider: "BNZ Service Desk"
          hours: "24x7"
        - tier: "L2"
          provider: "BNZ AI Platform Team"
          hours: "Business hours"
        - tier: "L3"
          provider: "AWS Premium Support"
          hours: "24x7"
      aws_support:
        support_level: "Enterprise"
        support_contact: "AWS Technical Account Manager"

dependencies:
  technology_dependencies:
    aws_services:
      - service_name: "Amazon Bedrock"
        purpose: "Foundation model access (Claude, Titan models)"
        criticality: "Critical"
      - service_name: "AWS Lambda"
        purpose: "Serverless compute for custom integrations"
        criticality: "High"
      - service_name: "Amazon CloudWatch"
        purpose: "Monitoring and logging"
        criticality: "High"
      - service_name: "AWS IAM"
        purpose: "Authentication and authorization"
        criticality: "Critical"
      - service_name: "AWS Secrets Manager"
        purpose: "Secrets and credentials management"
        criticality: "High"
    
    external_dependencies:
      - dependency_name: "Foundation Models"
        providers: ["Anthropic Claude", "OpenAI GPT-4"]
        criticality: "Critical"
        fallback: "Multi-model support for redundancy"
  
  service_dependencies: []
  
  infrastructure_dependencies:
    compute:
      platform: "AWS Serverless (Firecracker microVMs)"
      scaling: "Automatic"
    network:
      vpc: "BNZ AI Platform VPC"
      subnets: "Private subnets with NAT Gateway for outbound"
      security_groups: ["Agent-SG", "Gateway-SG"]
    storage:
      object_storage: "S3 for artifacts and logs"
      database: "Managed by AgentCore Memory service"

cost_information:
  acquisition_costs:
    no_upfront_costs: true
    implementation_cost:
      consulting_services: 50000
      training: 15000
      total_implementation: 65000
  
  operational_costs:
    monthly_estimates:
      runtime_cost: 2000
      memory_cost: 500
      gateway_cost: 300
      identity_cost: 100
      observability_cost: 200
      foundation_model_cost: 5000
      total_monthly: 8100
      notes: "Excluding model tokens which are variable"
    
    annual_estimate: 97200
    cost_breakdown:
      - cost_category: "Compute (Runtime)"
        amount: 24000
      - cost_category: "Storage (Memory)"
        amount: 6000
      - cost_category: "Network (Gateway)"
        amount: 3600
      - cost_category: "Identity"
        amount: 1200
      - cost_category: "Observability"
        amount: 2400
      - cost_category: "Foundation Models"
        amount: 60000
    
    cost_optimization_strategies:
      - "Caching frequently used responses"
      - "Token usage limits per user/conversation"
      - "Automatic session timeout after inactivity"
      - "Reserved capacity for predictable workloads (when available in GA)"
  
  tco_analysis:
    tco_period_years: 3
    year_1_cost: 162200
    year_2_cost: 97200
    year_3_cost: 97200
    total_3_year_tco: 356600
    cost_per_unit:
      cost_per_conversation: 0.08
      cost_per_agent_hour: 2.70

capacity_scalability:
  current_capacity:
    concurrent_agents: 1000
    peak_concurrent: 2000
    conversations_per_day: 50000
    average_session_duration: "5 minutes"
  
  deployment_sizing:
    small:
      concurrent_agents: 100
      conversations_per_day: 5000
      estimated_cost: "$2,500/month"
    medium:
      concurrent_agents: 1000
      conversations_per_day: 50000
      estimated_cost: "$8,100/month"
    large:
      concurrent_agents: 10000
      conversations_per_day: 500000
      estimated_cost: "$75,000/month"
  
  scalability_plans:
    - timeframe: "Year 2026"
      target_capacity:
        conversations_per_day: 150000
        concurrent_agents: 5000
      estimated_cost: 25000
      infrastructure_changes: "Enable multi-region deployment for global coverage"

testing_qa:
  testing_strategy:
    unit_testing:
      coverage_target: "80%"
      coverage_actual: "78%"
      framework: "pytest"
    
    integration_testing:
      coverage: "65%"
      framework: "pytest + moto (AWS mocking)"
      environment: "Dedicated AWS test account"
    
    performance_testing:
      tool: "Locust"
      last_test_date: "2025-10-15"
      test_scenarios:
        - scenario: "Sustained load"
          description: "10,000 concurrent agents for 4 hours"
          result: "Pass - 95th percentile latency < 500ms"
  
  quality_metrics:
    defect_density: "0.5 defects per 1000 lines of code"
    mean_time_to_resolve: "2 hours"
    customer_satisfaction: "4.5/5"

diagrams:
  - diagram_id: "DIAG-001"
    diagram_name: "Physical Deployment Diagram"
    diagram_type: "UML Deployment / AWS Architecture"
    diagram_format: "draw.io"
    diagram_file: "SBB-APP-001-Deployment-v1.0.0.drawio"
    description: "Shows actual AWS AgentCore deployment architecture"
    ai_rendering_instructions:
      notation: "AWS Architecture Icons + UML Deployment"
      layout: "Multi-region layout (horizontal)"
      elements:
        regions:
          - region: "ap-southeast-2 (Sydney - Primary)"
            availability_zones: ["ap-southeast-2a", "ap-southeast-2b", "ap-southeast-2c"]
            components:
              - "API Gateway"
              - "AgentCore Runtime"
              - "AgentCore Memory"
              - "AgentCore Gateway"
              - "AgentCore Identity"
              - "AgentCore Observability"
              - "CloudWatch"
              - "VPC with private subnets"
          - region: "us-west-2 (Oregon - DR)"
            availability_zones: ["us-west-2a", "us-west-2b"]
            components: ["Same as primary (standby)"]
      styling:
        aws_icons: true
        color_scheme: "AWS official colors"
  
  - diagram_id: "DIAG-002"
    diagram_name: "Component Implementation Diagram"
    diagram_type: "C4 Container"
    diagram_format: "draw.io"
    diagram_file: "SBB-APP-001-Components-v1.0.0.drawio"
    description: "Shows AgentCore components and technology stack"
    ai_rendering_instructions:
      notation: "C4 Container Level"
      layout: "Layered (top-down)"
      containers:
        - container: "Agent Application"
          technology: "Python 3.11 + LangGraph"
          deployment: "AgentCore Runtime (Serverless)"
        - container: "AgentCore Runtime"
          technology: "AWS Managed (Firecracker microVMs)"
          responsibilities: ["Agent execution", "Session isolation", "Scaling"]
        - container: "AgentCore Memory"
          technology: "AWS Managed Service"
          responsibilities: ["Short-term memory", "Long-term memory", "Retrieval"]
        - container: "AgentCore Gateway"
          technology: "AWS Managed (MCP implementation)"
          responsibilities: ["Tool transformation", "API integration", "OAuth handling"]
  
  - diagram_id: "DIAG-003"
    diagram_name: "Data Flow Implementation Diagram"
    diagram_type: "Sequence Diagram"
    diagram_format: "draw.io"
    diagram_file: "SBB-APP-001-DataFlow-v1.0.0.drawio"
    description: "Shows actual data flow for agent invocation"
    ai_rendering_instructions:
      notation: "UML Sequence Diagram"
      layout: "Left-to-right sequence"
      actors:
        - "User Application"
        - "API Gateway"
        - "AgentCore Runtime"
        - "AgentCore Memory"
        - "Amazon Bedrock"
        - "AgentCore Gateway"
        - "External API"
      sequence:
        - {step: 1, from: "User Application", to: "API Gateway", action: "POST /invoke with user query", protocol: "HTTPS"}
        - {step: 2, from: "API Gateway", to: "AgentCore Runtime", action: "Invoke agent with session context", protocol: "AWS SDK"}
        - {step: 3, from: "AgentCore Runtime", to: "AgentCore Memory", action: "Retrieve relevant memories", protocol: "HTTPS REST"}
        - {step: 4, from: "AgentCore Runtime", to: "Amazon Bedrock", action: "Invoke Claude 3.5 Sonnet with context", protocol: "HTTPS REST"}
        - {step: 5, from: "AgentCore Runtime", to: "AgentCore Gateway", action: "Invoke tools via MCP", protocol: "MCP over HTTPS"}
        - {step: 6, from: "AgentCore Gateway", to: "External API", action: "Execute tool action", protocol: "HTTPS REST"}
        - {step: 7, from: "AgentCore Runtime", to: "AgentCore Memory", action: "Store conversation and learnings", protocol: "HTTPS REST"}
        - {step: 8, from: "AgentCore Runtime", to: "User Application", action: "Return agent response", protocol: "HTTPS (via API Gateway)"}

migration_transition:
  migration_strategy:
    greenfield_implementation: true
    phased_rollout:
      - phase: "Pilot (Phase 1)"
        duration: "3 months"
        scope: "Customer support agent for internal helpdesk"
        users: 100
      - phase: "Expansion (Phase 2)"
        duration: "6 months"
        scope: "Additional use cases (HR, IT, Finance agents)"
        users: 1000
      - phase: "Enterprise (Phase 3)"
        duration: "Ongoing"
        scope: "Enterprise-wide agent platform"
        users: "All employees + customers"

vendor_management:
  vendor_information:
    vendor_name: "Amazon Web Services, Inc."
    vendor_type: "Cloud Provider"
    account_details:
      account_id: "123456789012"
      organization_id: "o-xxxxxxxxxx"
      account_manager: "AWS Enterprise Account Team"
      technical_account_manager: "AWS TAM"
    support_details:
      support_tier: "Enterprise"
      support_hours: "24x7"
      support_portal: "https://console.aws.amazon.com/support/"
      support_email: "aws-support@amazon.com"
  
  sla_agreements:
    - service: "Amazon Bedrock AgentCore"
      availability_commitment: "99.9%"
      performance_commitment: "N/A (preview service)"
      support_response_time: "< 15 minutes (critical)"
  
  vendor_performance:
    last_review_date: "2025-10-01"
    performance_rating: "Excellent"
    issues_last_quarter: 0

known_issues_limitations:
  known_issues:
    - issue_id: "ISSUE-001"
      severity: "Low"
      description: "Preview service - GA date not announced"
      impact: "Potential API changes before GA"
      workaround: "Monitor AWS announcements, use IaC for easy updates"
      resolution_eta: "Q1 2026 (expected GA)"
  
  limitations:
    - limitation_type: "Functional"
      description: "No built-in low-code visual authoring"
      impact: "Requires developers with Python/TypeScript skills"
      mitigation: "Developer training, reusable templates"
    - limitation_type: "Regional"
      description: "Limited region availability (3 regions in preview)"
      impact: "Data residency considerations for some regions"
      mitigation: "Multi-region strategy, await GA for expanded regions"

lessons_learned:
  implementation_lessons:
    what_went_well:
      - "Rapid prototyping with AgentCore SDK"
      - "Seamless IAM integration for security"
      - "Excellent documentation and examples from AWS"
    what_could_improve:
      - "Cost estimation during preview challenging"
      - "Some MCP transformations require custom coding"
    recommendations:
      - "Start with well-defined use cases"
      - "Invest in logging early"
      - "Plan for token cost management"
  
  operational_lessons:
    what_went_well: []
    what_could_improve: []
    recommendations: []

related_documents:
  - document_type: "ABB"
    document_id: "ABB-APP-001"
    document_name: "Agentic AI Agent"
    relationship: "Realizes"
  - document_type: "SBB"
    document_id: "SBB-APP-002"
    document_name: "Microsoft Copilot Studio Agent"
    relationship: "Alternative Implementation"
  - document_type: "ADR"
    document_id: "ADR-2025-042"
    document_name: "Agent Platform Selection"
    relationship: "Decision Context"

version_history:
  - version: "1.0.0"
    date: "2025-11-28"
    author: "BNZ Enterprise Architecture"
    changes: "Initial version"
    approval_status: "Draft"
